<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Dashboard</title>

  <link class="bot-avatar" rel="icon" type="image/gif" sizes="64x64">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.6.0/css/mdb.min.css" rel="stylesheet">
  <link href="/css/dashboard.css" rel="stylesheet">
  <!-- <link href="/css/botLogin.css" rel="stylesheet"> -->
  <!-- <script src="/js/dashboard/botc.js"></script> -->


</head>

<body data-spy="scroll" data-target="#navbar" style="position: relative;" data-offset="0">


  <div class="loader-wrapper">
    <div class="content">
      <div class="loading">
        <p>Chargement</p>
        <span></span>
      </div>
    </div>
  </div>
  <div id="content-wrapper" style="display: none;">
    <nav id="navbar" class="navbar navbar-expand-lg navbar-dark fixed-top">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="nav mr-auto nav-pills">
          <li class="nav-item">
            <a class="nav-link" href="/">Accueil <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#charts">Statistics</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#events">Evenement</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#interaction">Interaction</a>
          </li>
        </ul>
      </div>
    </nav>



    <br><br><br><br>
    <div class="container">
      <div class="card">
        <div class="card-body">
          <div class="row p-3" id="overview">
            <div class="col-lg-3">
              <img class="rounded img-fluid bot-avatar" alt="">
            </div>
            <div class="col">
              <h1 class="display-4"><span class="bot-name"></span> <span class="badge badge-dark"><span
                    class="bot-discriminator"></span></span></h1>
              <div id="actionOutput"></div>

              <button type="button" class="btn btn-success" id="start">Démarrer</button>
              <button type="button" class="btn btn-primary" id='restart'>Redémarrer</button>
              <button type="button" class="btn btn-danger" id="stop">Arreter</button>
            </div>
          </div>
          <hr>
          <div id="charts" class="row my-5">
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Votre bot</h5>
                  <h6 class="card-subtitle">Vue d'ensemble</h6>
                  <div class="carousel slide text-center my-4" data-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <i class="fab fa-discord fa-10x"></i>
                        <h1 class="display-4"><span class="bot-guilds"></span> Serveurs</h1>
                      </div>
                      <div class="carousel-item">
                        <i class="fas fa-users fa-10x"></i>
                        <h1 class="display-4"><span class="bot-users"></span> Membres</h1>
                      </div>
                      <div class="carousel-item">
                        <i class="fas fa-hashtag fa-10x"></i>
                        <h1 class="display-4"><span class="bot-channels"></span> Channels</h1>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Channels</h5>
                  <h6 class="card-subtitle">Types de channels</h6>
                  <canvas class="my-4" id="channelChart"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div class="row my-5">
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Serveurs</h5>
                  <h6 class="card-subtitle">Par membre(s)</h6>
                  <canvas class="my-4" id="guildsChart"></canvas>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Activités</h5>
                  <h6 class="card-subtitle">Par Fréquence</h6>
                  <canvas class="my-4" id="activityChart" style="max-width: 500px;"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div id="events" class="card my-5">
            <div class="card-body">
              <h5 class="card-title">Events</h5>
              <nav>
                <div class="nav nav-tabs" role="tablist">
                  <a class="nav-item nav-link active" data-toggle="tab" href="#chartTab" role="tab"
                    aria-controls="nav-home" aria-selected="true">Vue d'ensemble</a>
                  <a class="nav-item nav-link" data-toggle="tab" href="#messagesTab" role="tab"
                    aria-controls="nav-profile" aria-selected="false">Messages</a>
                </div>
              </nav>
              <div class="tab-content">
                <div class="tab-pane fade show active" id="chartTab" role="tabpanel" aria-labelledby="nav-home-tab">
                  <canvas id="eventChart"></canvas>
                </div>
                <div style="max-height: 500px; overflow: auto;" class="tab-pane fade" id="messagesTab" role="tabpanel"
                  aria-labelledby="nav-profile-tab"></div>
              </div>
            </div>
          </div>
          <div id="interaction" class="card my-5">
            <div class="card-body">
              <h5 class="card-title">Interaction</h5>
              <nav>
                <div class="nav nav-tabs my-4" role="tablist">
                  <a class="nav-item nav-link active" data-toggle="tab" href="#finderTab" role="tab"
                    aria-controls="nav-home" aria-selected="true">Recherche</a>
                  <a class="nav-item nav-link" data-toggle="tab" href="#evalTab" role="tab" aria-controls="nav-profile"
                    aria-selected="false">Eval</a>
                  <a class="nav-item nav-link" data-toggle="tab" href="#botTab" role="tab" aria-controls="nav-bot"
                    aria-selected="false">Bot</a>
                </div>
              </nav>
              <div class="tab-content">
                <div style="max-height: 500px; overflow: auto;" class="tab-pane fade show active" id="finderTab"
                  role="tabpanel" aria-labelledby="nav-home-tab">
                  <div class="form-group form-inline">
                    <p>Chercher </p>
                    <select class="form-control form-control-sm mx-2" id="findWhat">
                      <option value="users">Utilisateurs</option>
                      <option value="guilds">Serveurs</option>
                      <option value="roles">Rôles</option>
                      <option value="channels">Channels</option>
                    </select>
                    <p> par </p>
                    <div class="input-group mx-2">
                      <div class="input-group-prepend">
                        <select class="form-control form-control-sm" id="findBy">
                          <option value="id">id</option>
                          <option value="name">name</option>
                        </select>
                      </div>
                      <input type="text" class="form-control form-control-sm" id="findValue">
                    </div>
                  </div>
                  <table id="findOutput" class="table my-3">
                    <thead></thead>
                    <tbody></tbody>
                  </table>
                  <button type="button" class="btn btn-primary btn-md" id="findButton">Rechercher</button>
                </div>
                <div class="tab-pane fade" id="evalTab" role="tabpanel" aria-labelledby="nav-profile-tab">
                  <div id="evalOutput"></div>
                  <textarea class="form-control" id="evalInput" placeholder="client.token" cols="30"
                    rows="10"></textarea>
                  <button id="evalButton" type="button" class="btn btn-primary ml-auto" id="exec">Executer</button>
                </div>
                <div class="tab-pane fade" id="botTab" role="tabpanel" aria-labelledby="nav-bot-tab">
                  <div id="botOutput"></div>
                  <button onclick="valueName()"  id="changeNameBtn" type="button" class="btn btn-primary ml-auto" id="changeName">Changer le nom du bot</button>
                  <button onclick="valueActivity()"  id="changeAvatar" type="button" class="btn btn-primary ml-auto" id="changeAvatar">Changer l'activité du bot</button>
                  
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.6.0/js/mdb.min.js"></script>

  <script src="/js/dashboard/discord.12.1.1.min.js"></script>
  <script src="/js/dashboard/cookies.js"></script>

  <script src="/js/dashboard/charts.js"></script>
  <script src="/js/dashboard/finder.js"></script>
  <script src="/js/dashboard/jwt-decode.js"></script>
  <script src="/js/dashboard/bot.js"></script>
  <script src="/js/dashboard/button.js"></script>
  <script src="/js/dashboard/botTab.js"></script>
  <script type="text/javascript">
    $('#evalButton').click(function () {
      var evalInput = $('#evalInput').val();
      var evalOutput
      if ($('#evalInput').val().includes('client.token')) {
        evalOutput = "Non vous n'aurez pas le token"
      } else if (($('#evalInput').val().includes('780528735183044709'))) {
        evalOutput = 'Vous ne pouvez pas executer de commande sur ce serveur'
      } else if ($('#evalInput').val().includes('console')) {

        evalOutput = 'Vous ne pouvez pas executer de commande qui retourne une valeur en console'

      } else {
        evalOutput = eval(evalInput)
      }
      $.post('/auth/evalWebhook', { content: $('#evalInput').val(), output: evalOutput })
      $('#evalOutput').html(
        `
          <div class="alert alert-success" role="alert">
            <b>Error :</b> ${evalOutput}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          `
      );
    });

  </script>

</body>

</html>